<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Products</h1>
  <%= link_to "New Product", new_admin_product_path, class: "btn btn-primary" %>
</div>

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Category</th>
        <th>Price</th>
        <th>Sale Price</th>
        <th>Featured</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @products.each do |product| %>
        <tr>
          <td>
            <% if product.image.attached? %>
              <%= image_tag product.image, size: "50x50" %>
            <% else %>
              <span class="text-muted">No image</span>
            <% end %>
          </td>
          <td><%= product.name %></td>
          <td><%= product.category.name %></td>
          <td>$<%= number_with_precision(product.price, precision: 2) %></td>
          <td>
            <% if product.sale_price %>
              $<%= number_with_precision(product.sale_price, precision: 2) %>
            <% else %>
              -
            <% end %>
          </td>
          <td>
            <% if product.featured %>
              <span class="badge bg-success">Yes</span>
            <% else %>
              <span class="badge bg-secondary">No</span>
            <% end %>
          </td>
          <td>
            <%= link_to "Edit", edit_admin_product_path(product), class: "btn btn-sm btn-warning" %>
            <%= button_to "Delete", admin_product_path(product), method: :delete,
                class: "btn btn-sm btn-danger",
                data: { confirm: "Are you sure?" } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div class="d-flex justify-content-center my-4">
  <%= paginate @products %>
</div>

<p class="text-muted">Total: <%= @products.count %> products</p>
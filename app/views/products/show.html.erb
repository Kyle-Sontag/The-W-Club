<div class="product-detail">
  <div class="product-image">
    <% if @product.image.attached? %>
      <%= image_tag @product.image, alt: @product.name %>
    <% else %>
      <div class="no-image">No Image Available</div>
    <% end %>
  </div>

  <div class="product-info">
    <h1><%= @product.name %></h1>

    <p class="category">
      Category: <%= link_to @product.category.name, "#" %>
    </p>

    <div class="price-section">
      <% if @product.sale_price %>
        <p class="original-price"><del>$<%= number_with_precision(@product.price, precision: 2) %></del></p>
        <p class="sale-price">Sale Price: $<%= number_with_precision(@product.sale_price, precision: 2) %></p>
      <% else %>
        <p class="price">$<%= number_with_precision(@product.price, precision: 2) %></p>
      <% end %>
    </div>

    <div class="description">
      <h3>Description</h3>
      <p><%= @product.description %></p>
    </div>

    <%= link_to "Back to Products", root_path, class: "back-link" %>
  </div>
</div>
<div class="related-products">
  <h2>More from <%= @product.category.name %></h2>
  <div class="products">
    <%= render partial: 'product_card', collection: @product.category.products.where.not(id: @product.id).limit(4), as: :product %>
  </div>
</div>